(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{103:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),o=a.n(c),i=a(22),u=a(31),s=a(80),l=a(25),p="GET_AUTOCOMPLETE",h="GET_WEATHER",m="GET_FAVOURITES_WEATHER",g="GET_CITY_BY_GEOLOCATION",x=function(e){return{type:"GET_AUTOCOMPLETE_SUCCESS",options:e}},d=function(e){return{type:h,params:e}},b=function(e){return{type:"GET_WEATHER_SUCCESS",weather:e}},f=function(e){return{type:"GET_FIVE_DAYS_WEATHER_SUCCESS",weather:e}},E=function(e){return{type:"GET_FAVOURITES_WEATHER_SUCCESS",favoritesWeather:e}},w=function(e){return{type:"SET_ERROR",error:e}},y=function(e){return{type:"SET_CITY",city:e}},v={options:[],weather:{},fiveDaysWeather:[],currentCity:{},favoritesWeather:{},metric:!0,error:""},k=a(26),O=a.n(k),_=a(17),j=a(50),T=function(e){return fetch("".concat(e)).then((function(e){return e.json()})).then((function(e){return e.Message?Promise.reject(e.Message):Promise.resolve(e)}))},S="https://dataservice.accuweather.com",C="V4wLi7E7zgghovUVROeLjGO3PBMP0apM",I=function(e){return T("".concat(S,"/locations/v1/cities/autocomplete?apikey=").concat(C,"&q=").concat(e))},W=function(e){return T("".concat(S,"/currentconditions/v1/").concat(e,"?apikey=").concat(C))},N=function(e){return T("".concat(S,"/currentconditions/v1/").concat(e,"?apikey=").concat(C)).then((function(t){return Object(j.a)({},e,t[0])}))},A=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return T("".concat(S,"/forecasts/v1/daily/5day/").concat(e,"?apikey=").concat(C,"&metric=").concat(t))},R=function(e){return T("".concat(S,"/locations/v1/cities/geoposition/search?apikey=").concat(C,"&q=").concat(e.latitude,",").concat(e.longitude))},M=O.a.mark(F),U=O.a.mark(B),D=O.a.mark(V),G=O.a.mark(P),L=O.a.mark(z);function F(e){var t,a;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.params,n.prev=1,!t){n.next=8;break}return n.next=5,I(t);case 5:n.t0=n.sent,n.next=9;break;case 8:n.t0=[];case 9:return a=n.t0,n.next=12,Object(_.b)(x(a));case 12:n.next=18;break;case 14:return n.prev=14,n.t1=n.catch(1),n.next=18,Object(_.b)(w("Sorry, something went wrong in autocomplete"));case 18:case"end":return n.stop()}}),M,null,[[1,14]])}function B(e){var t,a,n,r,c;return O.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.params,a=t.selectedOption,n=t.metric,o.prev=1,o.next=4,W(a.Key);case 4:return r=o.sent,o.next=7,A(a.Key,n);case 7:return c=o.sent,o.next=10,Object(_.b)(b(r));case 10:return o.next=12,Object(_.b)(f(c));case 12:return o.next=14,Object(_.b)(y(a));case 14:o.next=20;break;case 16:return o.prev=16,o.t0=o.catch(1),o.next=20,Object(_.b)(w("Sorry, something went wrong in getting weather"));case 20:case"end":return o.stop()}}),U,null,[[1,16]])}function V(e){var t,a;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.location,n.prev=1,n.next=4,R(t);case 4:return a=n.sent,n.next=7,B({params:{selectedOption:a}});case 7:n.next=13;break;case 9:return n.prev=9,n.t0=n.catch(1),n.next=13,Object(_.b)(w("Sorry, something went wrong in getting weather by geolocation"));case 13:case"end":return n.stop()}}),D,null,[[1,9]])}function P(e){var t,a,n;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.favorites,r.prev=1,r.next=4,Object(_.a)(t.map((function(e){return N(e.key)})));case 4:return a=r.sent,r.next=7,a.reduce((function(e,t){return Object(l.a)({},e,{},t)}),{});case 7:return n=r.sent,r.next=10,Object(_.b)(E(n));case 10:r.next=16;break;case 12:return r.prev=12,r.t0=r.catch(1),r.next=16,Object(_.b)(w("Sorry, something went wrong in getting weather for favorites cities"));case 16:case"end":return r.stop()}}),G,null,[[1,12]])}function z(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.a)([Object(_.c)(p,F),Object(_.c)(h,B),Object(_.c)(m,P),Object(_.c)(g,V)]);case 2:case"end":return e.stop()}}),L)}var H=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.c,K=Object(s.a)(),Y=Object(u.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_AUTOCOMPLETE_SUCCESS":return Object(l.a)({},e,{options:t.options,error:""});case"GET_WEATHER_SUCCESS":return Object(l.a)({},e,{weather:t.weather[0],error:""});case"GET_FIVE_DAYS_WEATHER_SUCCESS":return Object(l.a)({},e,{fiveDaysWeather:t.weather.DailyForecasts,error:""});case"GET_FAVOURITES_WEATHER_SUCCESS":return Object(l.a)({},e,{favoritesWeather:t.favoritesWeather});case"SET_CITY":return Object(l.a)({},e,{currentCity:t.city});case"SET_METRIC":return Object(l.a)({},e,{metric:t.metric});case"SET_ERROR":return Object(l.a)({},e,{error:t.error});default:return Object(l.a)({},e)}}),H(Object(u.a)(K)));K.run(z);a(98);var J=a(45),q=a(33),X=(a(99),a(6)),$=a(145),Q=a(146),Z=a(138),ee=a(143),te=a(142),ae=a(144),ne=r.a.forwardRef((function(e,t){return r.a.createElement(J.b,Object.assign({to:"/",exact:!0},e,{ref:t}))})),re=r.a.forwardRef((function(e,t){return r.a.createElement(J.b,Object.assign({to:"/favorites"},e,{ref:t}))})),ce=Object(X.a)({grow:{flexGrow:1},active:{border:"1px solid grey"}})((function(e){var t=e.classes;return r.a.createElement(Z.a,{position:"static",color:"default"},r.a.createElement(te.a,null,r.a.createElement(ee.a,{variant:"h6",color:"inherit",className:t.grow},"Weather application"),r.a.createElement(ae.a,{component:ne,color:"inherit",activeClassName:t.active},"Home"),r.a.createElement(ae.a,{component:re,color:"inherit",activeClassName:t.active},"Favorites")))})),oe=a(9),ie=a.n(oe),ue={"bg-1_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -10px -10px")},"bg-2_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -105px -10px")},"bg-3_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -10px -75px")},"bg-4_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -105px -75px")},"bg-5_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -200px -10px")},"bg-6_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -200px -75px")},"bg-7_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -10px -140px")},"bg-8_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -105px -140px")},"bg-11_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -200px -140px")},"bg-12_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -10px -205px")},"bg-13_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -105px -205px")},"bg-14_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -200px -205px")},"bg-15_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -295px -10px")},"bg-16_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -295px -75px")},"bg-17_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -295px -140px")},"bg-18_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -295px -205px")},"bg-19_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -10px -270px")},"bg-20_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -105px -270px")},"bg-21_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -200px -270px")},"bg-22_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -295px -270px")},"bg-23_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -390px -10px")},"bg-24_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -390px -75px")},"bg-25_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -390px -140px")},"bg-26_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -390px -205px")},"bg-29_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -390px -270px")},"bg-30_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -10px -335px")},"bg-31_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -105px -335px")},"bg-32_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -200px -335px")},"bg-33_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -295px -335px")},"bg-34_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -390px -335px")},"bg-35_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -10px -400px")},"bg-36_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -105px -400px")},"bg-37_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -200px -400px")},"bg-38_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -295px -400px")},"bg-39_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -390px -400px")},"bg-40_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -485px -10px")},"bg-41_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -485px -75px")},"bg-42_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -485px -140px")},"bg-43_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -485px -205px")},"bg-44_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -485px -270px")}},se=Object(X.a)(ue)((function(e){var t=e.classes,a=e.iconNum;return r.a.createElement(ee.a,{component:"div",className:t["bg-".concat(a,"_s")]})})),le=function(e){var t=e.weather,a=t.header,n=t.body,c=t.footer,o=t.iconNum,i=e.classes,u=e.weatherKey,s=e.getWeatherByClick;return r.a.createElement($.a,{item:!0,md:2,sm:4,xs:12,onClick:s?function(){s(u)}:null,className:s?i.clickable:""},r.a.createElement(Q.a,{className:i.cardItem},o&&r.a.createElement(se,{iconNum:o}),r.a.createElement(ee.a,{component:"p",align:"center",variant:"body2"},a),r.a.createElement(ee.a,{component:"p",align:"center",variant:"subtitle2",color:"primary"},n),r.a.createElement(ee.a,{component:"p",align:"center"},c)))},pe=Object(X.a)({cardItem:{height:"120px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},clickable:{cursor:"pointer"}})(le);le.defaultProps={header:"",body:"",footer:"",iconNum:null};var he=a(147),me=a(75),ge=a.n(me),xe=function(e){var t=e.favorite,a=e.favoritesHandler;return r.a.createElement($.a,{item:!0,sm:4,xs:6,align:"right"},r.a.createElement(he.a,{color:t?"secondary":"default",onClick:a},r.a.createElement(ge.a,null)),r.a.createElement(ee.a,{component:"span",variant:"subtitle1"},"Favorites"))},de=function(e){var t=e.weatherArr,a=e.getWeatherByClick;return r.a.createElement($.a,{container:!0,justify:"center",alignItems:"flex-start",spacing:2,style:{margin:"40px 0"}},t.length?t.map((function(e){return e.key?r.a.createElement(pe,{weather:e,key:e.key,weatherKey:e.key,getWeatherByClick:a}):null})):null)},be=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],fe=function(e){return be[new Date(e).getDay()]},Ee=function(e,t){return!!e.filter((function(e){return e.key===t})).length},we=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t){var n=a?"Metric":"Imperial";return e.map((function(e){var a=t[e.key];return a?{key:e.key,header:e.city,body:"".concat(a.Temperature[n].Value).concat(a.Temperature[n].Unit),footer:a.WeatherText,iconNum:a.WeatherIcon}:{}}))}return e.map((function(e){return{key:e.EpochDate,header:fe(e.Date),body:e.Day.IconPhrase,footer:"".concat(e.Temperature.Minimum.Value).concat(e.Temperature.Minimum.Unit," / ").concat(e.Temperature.Maximum.Value).concat(e.Temperature.Maximum.Unit)}}))},ye=function(e){var t=e.getFavoritesWeather,a=e.favoritesWeather,c=e.classes,o=e.setCity,i=e.history.push,u=e.metric,s=JSON.parse(window.localStorage.getItem("cities"))||[];Object(n.useEffect)((function(){t(s)}),[]);var l=Object.keys(a).length?we(s,a,u):[];return r.a.createElement(r.a.Fragment,null,r.a.createElement(ce,null),r.a.createElement(Q.a,{className:c.root},l.length?r.a.createElement($.a,{container:!0,justify:"center",alignItems:"center"},r.a.createElement(de,{weatherArr:l,getWeatherByClick:function(e){var t=s.find((function(t){return t.key===e}));o({LocalizedName:t.city,Key:t.key}),i("/"),console.log("getWeatherByClick",t)}})):r.a.createElement(ee.a,{align:"center",variant:"subtitle1"},"There's no favorite cities here")))},ve={getFavoritesWeather:function(e){return{type:m,favorites:e}},setCity:y},ke=Object(i.b)((function(e){return{favoritesWeather:e.favoritesWeather,metric:e.metric}}),ve)(Object(X.a)({root:{backgroundColor:"whitesmoke",padding:"15px",width:"90%",margin:"20px auto"}})(ye));ye.defaultProps={push:function(e){return e}};var Oe=a(55),_e=a(76),je=a(46),Te=a(149),Se=a(150),Ce=a(77),Ie=a.n(Ce),We={getAutocomplete:function(e){return{type:p,params:e}},getWeather:d},Ne=Object(i.b)((function(e){return{options:e.options,metric:e.metric}}),We)(Object(X.a)({root:{margin:"20px 0"},icon:{color:"grey",marginRight:"5px"},margin:{margin:"10px 0 10px 10px"},width:{width:"300px"}})((function(e){var t=e.classes,a=e.options,c=e.getAutocomplete,o=e.getWeather,i=e.metric,u=Object(n.useState)(""),s=Object(je.a)(u,2),l=s[0],p=s[1],h=Object(n.useState)({}),m=Object(je.a)(h,2),g=m[0],x=m[1],d=function(e){var t=e.target.value;x({}),p(t)};Object(n.useEffect)((function(){l&&c(l)}),[l]);return r.a.createElement($.a,{container:!0,justify:"center",alignItems:"center",className:t.root},r.a.createElement(Se.a,{id:"autocomplete-search",options:a,disableClearable:!0,freeSolo:!0,getOptionLabel:function(e){return e.LocalizedName},renderInput:function(e){return r.a.createElement(Te.a,Object.assign({},e,{label:"Search city",variant:"outlined",onChange:d,className:t.width}))},renderOption:function(e){return r.a.createElement($.a,{container:!0,alignItems:"center"},r.a.createElement($.a,{item:!0},r.a.createElement(Ie.a,{className:t.icon})),r.a.createElement($.a,{item:!0,xs:!0},r.a.createElement(ee.a,{color:"textSecondary"},e.LocalizedName)))},inputValue:l,onChange:function(e,t){Object(_e.a)(e),p(t.LocalizedName),x(t)}}),r.a.createElement(ae.a,{variant:"contained",size:"small",color:"primary",className:t.margin,onClick:function(){o({selectedOption:g,metric:i}),p(""),x({})},disabled:!Object.keys(g).length},"Get weather"))}))),Ae=a(79),Re={Version:1,Key:"215854",Type:"City",Rank:31,LocalizedName:"Tel Aviv",Country:{ID:"IL",LocalizedName:"Israel"},AdministrativeArea:{ID:"TA",LocalizedName:"Tel Aviv"}},Me={getWeather:d,getCityByGeolocation:function(e){return{type:g,location:e}}},Ue=Object(i.b)((function(e){return{weather:e.weather,currentCity:e.currentCity,fiveDaysWeather:e.fiveDaysWeather,metric:e.metric}}),Me)(Object(X.a)({root:{backgroundColor:"whitesmoke",padding:"15px",width:"90%",margin:"20px auto"},weatherBlock:{display:"flex",flexDirection:"row",alignItems:"center"}})((function(e){var t=e.classes,a=e.weather,c=e.getWeather,o=e.currentCity,i=e.fiveDaysWeather,u=e.getCityByGeolocation,s=e.metric,l=JSON.parse(window.localStorage.getItem("cities"))||[],p=Ee(l,o.Key),h=s?"Metric":"Imperial",m=we(i),g=Object(n.useState)(p),x=Object(je.a)(g,2),d=x[0],b=x[1],f=function(){return c({selectedOption:Re,metric:s})};Object(n.useEffect)((function(){Object.keys(o).length?c({selectedOption:o,metric:s}):function(e,t){var a=window.navigator&&window.navigator.geolocation;a?a.getCurrentPosition((function(t){e({latitude:t.coords.latitude,longitude:t.coords.longitude})}),(function(){t()})):t()}(u,f)}),[s]),Object(n.useEffect)((function(){b(Ee(l,o.Key))}),[o.Key,l]);return r.a.createElement(Q.a,{className:t.root},r.a.createElement($.a,{container:!0,justify:"center",alignItems:"center"},r.a.createElement($.a,{item:!0,sm:8,xs:6,className:t.weatherBlock},a.WeatherIcon&&r.a.createElement($.a,{item:!0},r.a.createElement(se,{iconNum:a.WeatherIcon})),r.a.createElement($.a,{item:!0},r.a.createElement(ee.a,{component:"h6",variant:"h6"},o.LocalizedName),r.a.createElement(ee.a,{component:"p",variant:"subtitle1"},a.Temperature&&a.Temperature[h].Value,a.Temperature&&a.Temperature[h].Unit))),r.a.createElement(xe,{favorite:d,favoritesHandler:function(){b(!p);var e=p?l.filter((function(e){return e.key!==o.Key})):[].concat(Object(Ae.a)(l),[{city:o.LocalizedName,key:o.Key}]);window.localStorage.setItem("cities",JSON.stringify(e))}}),r.a.createElement($.a,{item:!0,xs:12},r.a.createElement(ee.a,{component:"p",variant:"h5",align:"center"},a.WeatherText)),r.a.createElement(de,{weatherArr:m}),r.a.createElement(Le,null)))}))),De=a(151),Ge={setMetric:function(e){return{type:"SET_METRIC",metric:e}}},Le=Object(i.b)((function(e){return{metric:e.metric}}),Ge)((function(e){var t=e.metric,a=e.setMetric;return r.a.createElement(ee.a,{component:"div"},r.a.createElement($.a,{component:"label",container:!0,alignItems:"center",spacing:1},r.a.createElement($.a,{item:!0},"Fahrenheit"),r.a.createElement($.a,{item:!0},r.a.createElement(De.a,{checked:t,color:"default",onChange:function(e){var t=e.target;a(t.checked)}})),r.a.createElement($.a,{item:!0},"Celsius")))})),Fe=(a(102),Object(i.b)((function(e){return{error:e.error}}))((function(e){var t=e.error;return Object(n.useEffect)((function(){var e;t&&(e=t,Oe.b.error(e,{position:Oe.b.POSITION.BOTTOM_LEFT}))}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.a,{autoClose:5e3}),r.a.createElement(ce,null),r.a.createElement(Ne,null),r.a.createElement(Ue,null))}))),Be=Object(X.a)({margin:{margin:"20px 0"}})((function(e){var t=e.classes;return r.a.createElement($.a,{container:!0,justify:"center",alignItems:"center",direction:"column"},r.a.createElement(ee.a,{variant:"h5",className:t.margin},"Sorry, this page is not found"),r.a.createElement(ae.a,{href:"/",variant:"outlined",className:t.margin},"Go to home page"))})),Ve=function(){return r.a.createElement(J.a,{basename:"/"},r.a.createElement(q.c,null,r.a.createElement(q.a,{path:"/",exact:!0,component:Fe}),r.a.createElement(q.a,{path:"/favorites",exact:!0,component:ke}),r.a.createElement(q.a,{component:Be})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Pe=r.a.createElement(i.a,{store:Y},r.a.createElement(Ve,null));o.a.render(Pe,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},88:function(e,t,a){e.exports=a(103)},9:function(e,t,a){e.exports=a.p+"static/media/css_sprites.062925ff.png"},98:function(e,t,a){},99:function(e,t,a){}},[[88,1,2]]]);
//# sourceMappingURL=main.c52ed934.chunk.js.map