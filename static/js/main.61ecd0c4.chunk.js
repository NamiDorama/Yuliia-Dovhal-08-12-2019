(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{101:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),o=a.n(c),i=a(24),u=a(30),s=a(77),p=a(27),l="GET_AUTOCOMPLETE",h="GET_WEATHER",g="GET_FAVOURITES_WEATHER",x="GET_CITY_BY_GEOLOCATION",m=function(e){return{type:"GET_AUTOCOMPLETE_SUCCESS",options:e}},d=function(e){return{type:h,selectedOption:e}},b=function(e){return{type:"GET_WEATHER_SUCCESS",weather:e}},f=function(e){return{type:"GET_FIVE_DAYS_WEATHER_SUCCESS",weather:e}},E=function(e){return{type:"GET_FAVOURITES_WEATHER_SUCCESS",favoritesWeather:e}},w=function(e){return{type:"SET_ERROR",error:e}},v=function(e){return{type:"SET_CITY",city:e}},y={options:[],weather:{},fiveDaysWeather:[],currentCity:{},favoritesWeather:{},error:""},O=a(23),k=a.n(O),_=a(17),j=a(48),T=function(e){return fetch("".concat(e)).then((function(e){return e.json()})).then((function(e){return e.Message?Promise.reject(e.Message):Promise.resolve(e)}))},S="https://dataservice.accuweather.com",C="xWB8K6ZlIV36i0F47cO3vdepKhJdQtHM",I=function(e){return T("".concat(S,"/locations/v1/cities/autocomplete?apikey=").concat(C,"&q=").concat(e))},W=function(e){return T("".concat(S,"/currentconditions/v1/").concat(e,"?apikey=").concat(C))},N=function(e){return T("".concat(S,"/currentconditions/v1/").concat(e,"?apikey=").concat(C)).then((function(t){return Object(j.a)({},e,t[0])}))},A=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return T("".concat(S,"/forecasts/v1/daily/5day/").concat(e,"?apikey=").concat(C,"&metric=").concat(t))},R=function(e){return T("".concat(S,"/locations/v1/cities/geoposition/search?apikey=").concat(C,"&q=").concat(e.latitude,",").concat(e.longitude))},D=k.a.mark(F),U=k.a.mark(V),G=k.a.mark(H),M=k.a.mark(K),L=k.a.mark(P);function F(e){var t,a;return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.params,n.prev=1,!t){n.next=8;break}return n.next=5,I(t);case 5:n.t0=n.sent,n.next=9;break;case 8:n.t0=[];case 9:return a=n.t0,n.next=12,Object(_.b)(m(a));case 12:n.next=18;break;case 14:return n.prev=14,n.t1=n.catch(1),n.next=18,Object(_.b)(w("Sorry, something went wrong in autocomplete"));case 18:case"end":return n.stop()}}),D,null,[[1,14]])}function V(e){var t,a,n;return k.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.selectedOption,r.prev=1,r.next=4,W(t.Key);case 4:return a=r.sent,r.next=7,A(t.Key);case 7:return n=r.sent,r.next=10,Object(_.b)(b(a));case 10:return r.next=12,Object(_.b)(f(n));case 12:return r.next=14,Object(_.b)(v(t));case 14:r.next=20;break;case 16:return r.prev=16,r.t0=r.catch(1),r.next=20,Object(_.b)(w("Sorry, something went wrong in getting weather"));case 20:case"end":return r.stop()}}),U,null,[[1,16]])}function H(e){var t,a;return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.location,n.prev=1,n.next=4,R(t);case 4:return a=n.sent,n.next=7,V({selectedOption:a});case 7:n.next=13;break;case 9:return n.prev=9,n.t0=n.catch(1),n.next=13,Object(_.b)(w("Sorry, something went wrong in getting weather by geolocation"));case 13:case"end":return n.stop()}}),G,null,[[1,9]])}function K(e){var t,a,n;return k.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.favorites,r.prev=1,r.next=4,Object(_.a)(t.map((function(e){return N(e.key)})));case 4:return a=r.sent,r.next=7,a.reduce((function(e,t){return Object(p.a)({},e,{},t)}),{});case 7:return n=r.sent,r.next=10,Object(_.b)(E(n));case 10:r.next=16;break;case 12:return r.prev=12,r.t0=r.catch(1),r.next=16,Object(_.b)(w("Sorry, something went wrong in getting weather for favorites cities"));case 16:case"end":return r.stop()}}),M,null,[[1,12]])}function P(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.a)([Object(_.c)(l,F),Object(_.c)(h,V),Object(_.c)(g,K),Object(_.c)(x,H)]);case 2:case"end":return e.stop()}}),L)}var z=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.c,B=Object(s.a)(),J=Object(u.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_AUTOCOMPLETE_SUCCESS":return Object(p.a)({},e,{options:t.options,error:""});case"GET_WEATHER_SUCCESS":return Object(p.a)({},e,{weather:t.weather[0],error:""});case"GET_FIVE_DAYS_WEATHER_SUCCESS":return Object(p.a)({},e,{fiveDaysWeather:t.weather.DailyForecasts,error:""});case"GET_FAVOURITES_WEATHER_SUCCESS":return Object(p.a)({},e,{favoritesWeather:t.favoritesWeather});case"SET_CITY":return Object(p.a)({},e,{currentCity:t.city});case"SET_ERROR":return Object(p.a)({},e,{error:t.error});default:return Object(p.a)({},e)}}),z(Object(u.a)(B)));B.run(P);a(96);var Y=a(44),q=a(32),X=(a(97),a(6)),Q=a(142),Z=a(143),$=a(135),ee=a(140),te=a(139),ae=a(141),ne=r.a.forwardRef((function(e,t){return r.a.createElement(Y.b,Object.assign({to:"/",exact:!0},e,{ref:t}))})),re=r.a.forwardRef((function(e,t){return r.a.createElement(Y.b,Object.assign({to:"/favorites"},e,{ref:t}))})),ce=Object(X.a)({grow:{flexGrow:1},active:{border:"1px solid grey"}})((function(e){var t=e.classes;return r.a.createElement($.a,{position:"static",color:"default"},r.a.createElement(te.a,null,r.a.createElement(ee.a,{variant:"h6",color:"inherit",className:t.grow},"Weather application"),r.a.createElement(ae.a,{component:ne,color:"inherit",activeClassName:t.active},"Home"),r.a.createElement(ae.a,{component:re,color:"inherit",activeClassName:t.active},"Favorites")))})),oe=a(9),ie=a.n(oe),ue={"bg-1_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -10px -10px")},"bg-2_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -105px -10px")},"bg-3_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -10px -75px")},"bg-4_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -105px -75px")},"bg-5_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -200px -10px")},"bg-6_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -200px -75px")},"bg-7_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -10px -140px")},"bg-8_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -105px -140px")},"bg-11_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -200px -140px")},"bg-12_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -10px -205px")},"bg-13_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -105px -205px")},"bg-14_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -200px -205px")},"bg-15_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -295px -10px")},"bg-16_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -295px -75px")},"bg-17_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -295px -140px")},"bg-18_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -295px -205px")},"bg-19_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -10px -270px")},"bg-20_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -105px -270px")},"bg-21_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -200px -270px")},"bg-22_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -295px -270px")},"bg-23_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -390px -10px")},"bg-24_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -390px -75px")},"bg-25_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -390px -140px")},"bg-26_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -390px -205px")},"bg-29_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -390px -270px")},"bg-30_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -10px -335px")},"bg-31_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -105px -335px")},"bg-32_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -200px -335px")},"bg-33_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -295px -335px")},"bg-34_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -390px -335px")},"bg-35_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -10px -400px")},"bg-36_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -105px -400px")},"bg-37_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -200px -400px")},"bg-38_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -295px -400px")},"bg-39_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -390px -400px")},"bg-40_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -485px -10px")},"bg-41_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -485px -75px")},"bg-42_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -485px -140px")},"bg-43_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -485px -205px")},"bg-44_s":{width:"75px",height:"45px",background:"url(".concat(ie.a,") -485px -270px")}},se=Object(X.a)(ue)((function(e){var t=e.classes,a=e.iconNum;return r.a.createElement(ee.a,{component:"div",className:t["bg-".concat(a,"_s")]})})),pe=function(e){var t=e.weather,a=t.header,n=t.body,c=t.footer,o=t.iconNum,i=e.classes;return r.a.createElement(Q.a,{item:!0,md:2,sm:4,xs:12},r.a.createElement(Z.a,{className:i.cardItem},o&&r.a.createElement(se,{iconNum:o}),r.a.createElement(ee.a,{component:"p",align:"center",variant:"body2"},a),r.a.createElement(ee.a,{component:"p",align:"center",variant:"subtitle2",color:"primary"},n),r.a.createElement(ee.a,{component:"p",align:"center"},c)))},le=Object(X.a)({cardItem:{height:"120px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}})(pe);pe.defaultProps={header:"",body:"",footer:"",iconNum:null};var he=a(144),ge=a(72),xe=a.n(ge),me=function(e){var t=e.favorite,a=e.favoritesHandler;return r.a.createElement(Q.a,{item:!0,sm:4,xs:6,align:"right"},r.a.createElement(he.a,{color:t?"secondary":"default",onClick:a},r.a.createElement(xe.a,null)),r.a.createElement(ee.a,{component:"span",variant:"subtitle1"},"Favorites"))},de=function(e){var t=e.weatherArr;return r.a.createElement(Q.a,{container:!0,justify:"center",alignItems:"flex-start",spacing:2,style:{margin:"40px 0"}},t.length?t.map((function(e){return e.key?r.a.createElement(le,{weather:e,key:e.key}):null})):null)},be=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],fe=function(e){return be[new Date(e).getDay()]},Ee=function(e,t){return!!e.filter((function(e){return e.key===t})).length},we=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?e.map((function(e){var a=t[e.key];return a?{key:e.key,header:e.city,body:"".concat(a.Temperature.Metric.Value).concat(a.Temperature.Metric.Unit),footer:a.WeatherText,iconNum:a.WeatherIcon}:{}})):e.map((function(e){return{key:e.EpochDate,header:fe(e.Date),body:e.Day.IconPhrase,footer:"".concat(e.Temperature.Minimum.Value).concat(e.Temperature.Minimum.Unit," / ").concat(e.Temperature.Maximum.Value).concat(e.Temperature.Maximum.Unit)}}))},ve={getFavoritesWeather:function(e){return{type:g,favorites:e}}},ye=Object(i.b)((function(e){return{favoritesWeather:e.favoritesWeather}}),ve)(Object(X.a)({root:{backgroundColor:"whitesmoke",padding:"15px",width:"90%",margin:"20px auto"}})((function(e){var t=e.getFavoritesWeather,a=e.favoritesWeather,c=e.classes,o=JSON.parse(window.localStorage.getItem("cities"))||[];Object(n.useEffect)((function(){t(o)}),[]);var i=Object.keys(a).length?we(o,a):[];return r.a.createElement(r.a.Fragment,null,r.a.createElement(ce,null),r.a.createElement(Z.a,{className:c.root},i.length?r.a.createElement(Q.a,{container:!0,justify:"center",alignItems:"center"},r.a.createElement(de,{weatherArr:i})):r.a.createElement(ee.a,{align:"center",variant:"subtitle1"},"There's no favorite cities here")))}))),Oe=a(36),ke=a(53),_e=a(73),je=a(146),Te=a(147),Se=a(74),Ce=a.n(Se),Ie={getAutocomplete:function(e){return{type:l,params:e}},getWeather:d},We=Object(i.b)((function(e){return{options:e.options}}),Ie)(Object(X.a)({root:{margin:"20px 0"},icon:{color:"grey",marginRight:"5px"},margin:{margin:"10px 0 10px 10px"},width:{width:"300px"}})((function(e){var t=e.classes,a=e.options,c=e.getAutocomplete,o=e.getWeather,i=Object(n.useState)(""),u=Object(Oe.a)(i,2),s=u[0],p=u[1],l=Object(n.useState)({}),h=Object(Oe.a)(l,2),g=h[0],x=h[1],m=function(e){var t=e.target.value;x({}),p(t)};Object(n.useEffect)((function(){s&&c(s)}),[s]);return r.a.createElement(Q.a,{container:!0,justify:"center",alignItems:"center",className:t.root},r.a.createElement(Te.a,{id:"autocomplete-search",options:a,disableClearable:!0,freeSolo:!0,getOptionLabel:function(e){return e.LocalizedName},renderInput:function(e){return r.a.createElement(je.a,Object.assign({},e,{label:"Search city",variant:"outlined",onChange:m,className:t.width}))},renderOption:function(e){return r.a.createElement(Q.a,{container:!0,alignItems:"center"},r.a.createElement(Q.a,{item:!0},r.a.createElement(Ce.a,{className:t.icon})),r.a.createElement(Q.a,{item:!0,xs:!0},r.a.createElement(ee.a,{color:"textSecondary"},e.LocalizedName)))},inputValue:s,onChange:function(e,t){Object(_e.a)(e),p(t.LocalizedName),x(t)}}),r.a.createElement(ae.a,{variant:"contained",size:"small",color:"primary",className:t.margin,onClick:function(){o(g),p(""),x({})},disabled:!Object.keys(g).length},"Get weather"))}))),Ne=a(76),Ae={Version:1,Key:"215854",Type:"City",Rank:31,LocalizedName:"Tel Aviv",Country:{ID:"IL",LocalizedName:"Israel"},AdministrativeArea:{ID:"TA",LocalizedName:"Tel Aviv"}},Re={getWeather:d,getCityByGeolocation:function(e){return{type:x,location:e}}},De=Object(i.b)((function(e){return{weather:e.weather,currentCity:e.currentCity,fiveDaysWeather:e.fiveDaysWeather}}),Re)(Object(X.a)({root:{backgroundColor:"whitesmoke",padding:"15px",width:"90%",margin:"20px auto"},weatherBlock:{display:"flex",flexDirection:"row",alignItems:"center"}})((function(e){var t=e.classes,a=e.weather,c=e.getWeather,o=e.currentCity,i=e.fiveDaysWeather,u=e.location,s=e.getCityByGeolocation,p=JSON.parse(window.localStorage.getItem("cities"))||[],l=Ee(p,o.Key),h=we(i),g=Object(n.useState)(l),x=Object(Oe.a)(g,2),m=x[0],d=x[1];Object(n.useEffect)((function(){Object.keys(o).length?c(o):c(Ae)}),[]),Object(n.useEffect)((function(){u.latitude&&u.longitude&&s(u)}),[u]),Object(n.useEffect)((function(){d(Ee(p,o.Key))}),[o.Key,p]);return r.a.createElement(Z.a,{className:t.root},r.a.createElement(Q.a,{container:!0,justify:"center",alignItems:"center"},r.a.createElement(Q.a,{item:!0,sm:8,xs:6,className:t.weatherBlock},a.WeatherIcon&&r.a.createElement(Q.a,{item:!0},r.a.createElement(se,{iconNum:a.WeatherIcon})),r.a.createElement(Q.a,{item:!0},r.a.createElement(ee.a,{component:"h6",variant:"h6"},o.LocalizedName),r.a.createElement(ee.a,{component:"p",variant:"subtitle1"},a.Temperature&&a.Temperature.Metric.Value,a.Temperature&&a.Temperature.Metric.Unit))),r.a.createElement(me,{favorite:m,favoritesHandler:function(){d(!l);var e=l?p.filter((function(e){return e.key!==o.Key})):[].concat(Object(Ne.a)(p),[{city:o.LocalizedName,key:o.Key}]);window.localStorage.setItem("cities",JSON.stringify(e))}}),r.a.createElement(Q.a,{item:!0,xs:12},r.a.createElement(ee.a,{component:"p",variant:"h5",align:"center"},a.WeatherText)),r.a.createElement(de,{weatherArr:h})))}))),Ue=(a(100),Object(i.b)((function(e){return{error:e.error}}))((function(e){var t=e.error,a=Object(n.useState)({latitude:null,longitude:null}),c=Object(Oe.a)(a,2),o=c[0],i=c[1];return Object(n.useEffect)((function(){!function(e){var t=window.navigator&&window.navigator.geolocation;t&&t.getCurrentPosition((function(t){e({latitude:t.coords.latitude,longitude:t.coords.longitude})}),(function(){e({latitude:null,longitude:null})}))}(i)}),[]),Object(n.useEffect)((function(){var e;t&&(e=t,ke.b.error(e,{position:ke.b.POSITION.BOTTOM_LEFT}))}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a,{autoClose:5e3}),r.a.createElement(ce,null),r.a.createElement(We,null),r.a.createElement(De,{location:o}))}))),Ge=Object(X.a)({margin:{margin:"20px 0"}})((function(e){var t=e.classes;return r.a.createElement(Q.a,{container:!0,justify:"center",alignItems:"center",direction:"column"},r.a.createElement(ee.a,{variant:"h5",className:t.margin},"Sorry, this page is not found"),r.a.createElement(ae.a,{href:"/",variant:"outlined",className:t.margin},"Go to home page"))})),Me=function(){return r.a.createElement(Y.a,{basename:"/"},r.a.createElement(q.c,null,r.a.createElement(q.a,{path:"/",exact:!0,component:Ue}),r.a.createElement(q.a,{path:"/favorites",exact:!0,component:ye}),r.a.createElement(q.a,{component:Ge})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Le=r.a.createElement(i.a,{store:J},r.a.createElement(Me,null));o.a.render(Le,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},86:function(e,t,a){e.exports=a(101)},9:function(e,t,a){e.exports=a.p+"static/media/css_sprites.062925ff.png"},96:function(e,t,a){},97:function(e,t,a){}},[[86,1,2]]]);
//# sourceMappingURL=main.61ecd0c4.chunk.js.map